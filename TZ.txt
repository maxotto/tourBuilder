Постановка

на вход должен подавться файл конфигурации, где мы задаем:
- исходная папка
- папка с шаблонами
- выходная папка

ИСХОДНАЯ ПАПКА, состав
- сборка тура, подготовленная в KRPANO
- картинки планов этажей с заранее определенными именами, форматами и размерами
- файл с распределением сцен по этажам.

ПАПКА С ШАБЛОНАМИ состав
- папка ext, где лежат заготовки и XML-файлы для включения

ВЫХОДНАЯ ПАПКА
Здесь будет сформирован итоговый тур

Процесс
А) начальные действия и проверки
- перенести в выходную папку все части тура
- загрузить исходный XML тура из исходой папки
- вычленить оттуда определение сцен
- сравнить сцены с распределением по этажам. Каждой сцене должен быть сопоставлен этаж.
- по количеству этажей должны быть приложены картинки этажей с условденными именами
- должны быть приложены картинки переключателя этажей, по 2 на этаж с условленными именами
- формируем выходную папку с её подкаталогами, копируем туда статичные файлы
Если все прошло нормально, переходим к фазе Б)

Б) Формирование переключателя этажей
- загрузить шаблон
- установить начальные сцена для каждого этажа
- настроить кнопки переключателя - их внешний вид
- настроить поведение переключателя
- выгрузить полученный переключатель в выхлжную папку

В) Переключатель планов
жесткая смесь с хотспотами и сценами. Как автоматизировать?? Только ручкми, заранее приготовить. Клась в выходную папку как есть.

Г) Формирование окончательного XML
- загрузить шаблон  итогового XML
- преобразовать определения сцен из дефолтного тура в нужное
- выгрузить итоговый XML

